在我实际工作中，有这么一个需求，需要为客户生成一个标记，即客户号，要求如下:

1. 客户号唯一
2. 客户号易记
3. 客户号不容易被猜出来

首先，使用 uuid 能够保证唯一，但不容易记忆，排除掉。使用递增的数字，但不满足规则 3。因为客户都是企业部门或者政府部门，客户数量都可以预算到，如果超过1000个客户，那真是猪站到风口了，而且还是正中央。

根据实际的场景，设计了这么一套方案，该方案有如下特点

1. 5个数字组成的字符串，区间为 [00000, 99999] 
2. 数据库会记录客户信息，包括客户号
3. redis 缓存会缓存10个客户号，供新客户使用
4. 缓存的10个客户号被用完时，锁住 redis 缓存，随机产生客户号，最大上限 100000，且不在数据库中，如果存在，对数值加上一个 Magic 数值，重试是否存在，重试仍在存在时，则继续随机，然后将这批客户号，放入redis缓存中，释放 redis 锁.
